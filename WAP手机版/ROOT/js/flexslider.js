(function(b){b.flexslider=function(p,a){var r=b(p),k=b.extend({},b.flexslider.defaults,a),n=k.namespace,l=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,q=(l)?"touchend":"click",m=k.direction==="vertical",o={};b.data(p,"flexslider",r);o={init:function(){r.animating=false;r.currentSlide=k.startAt;r.animatingTo=r.currentSlide;r.atEnd=(r.currentSlide===0||r.currentSlide===r.last);r.containerSelector=k.selector.substr(0,k.selector.search(" "));r.slides=b(k.selector,r);r.container=b(r.containerSelector,r);r.count=r.slides.length;r.prop=(m)?"top":"marginLeft";r.padding=k.paddingWidth;r.args={};r.manualPause=false;r.transitions=(function(){var c=document.createElement("div"),d=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var e in d){if(c.style[d[e]]!==undefined){r.pfx=d[e].replace("Perspective","").toLowerCase();r.prop="-"+r.pfx+"-transform";return true}}return false}());if(k.controlsContainer!==""){r.controlsContainer=b(k.controlsContainer).length>0&&b(k.controlsContainer)}if(k.randomize){r.slides.sort(function(){return(Math.round(Math.random())-0.5)});r.container.empty().append(r.slides)}r.doMath();r.setup("init");if(k.controlNav){o.controlNav.setup()}if(k.directionNav){o.directionNav.setup()}if(k.slideshow){(k.initDelay>0)?setTimeout(r.play,k.initDelay):r.play()}if(l&&k.touch){o.touch()}b(window).bind("resize focus",o.resize)},controlNav:{setup:function(){o.controlNav.setupPaging()},setupPaging:function(){var c=(k.controlNav==="thumbnails")?"control-thumbs":"control-paging",e=1,i;var f=k.controlType==0?"":'<div class="m-xs-line"></div><div class="m-ct-time"><ul></ul></div>';r.controlNavSelector=k.controlType==0?"a":"a";r.controlNavScaffold=b('<article class="'+n+"control-nav "+n+c+'">'+f+"</article>");if(r.pagingCount>1){var g=parseInt(100/r.pagingCount);for(var d=0;d<r.pagingCount;d++){if(k.controlType==0){r.controlNavScaffold.append("<"+r.controlNavSelector+"/>")}else{var h=r.controlNavScaffold.find("ul");h.append('<li style="width:'+g+'%"><a><b>'+r.slides.eq(d).attr("txt")+"</b><s></s></a></li>")}e++}}(r.controlsContainer)?(k.controlPos==0?b(r.controlsContainer).append(r.controlNavScaffold):b(r.controlsContainer).prepend(r.controlNavScaffold)):(k.controlPos==0?r.container.after(r.controlNavScaffold):r.container.before(r.controlNavScaffold));o.controlNav.set();o.controlNav.active();if(k.controlType==1){r.controlNav.bind(q,function(v){v.preventDefault();var j=b(this),u=r.controlNav.index(j);if(!j.hasClass(n+"active")){r.direction=(u>r.currentSlide)?"next":"prev";r.flexAnimate(u,k.pauseOnAction)}});if(l){r.controlNav.bind("click touchstart",function(j){j.preventDefault()})}}},set:function(){var c=(k.controlNav==="thumbnails")?"img":r.controlNavSelector;r.controlNav=b("."+n+"control-nav "+c,(r.controlsContainer)?r.controlsContainer:r)},active:function(){r.controlNav.removeClass(n+"active").eq(r.animatingTo).addClass(n+"active")},update:function(d,c){if(r.pagingCount>1&&d==="add"){r.controlNavScaffold.append(b("<"+r.controlNavSelector+"/>"))}else{if(r.pagingCount===1){r.controlNavScaffold.find(r.controlNavSelector).remove()}else{r.controlNav.eq(c).closest(r.controlNavSelector).remove()}}o.controlNav.set();(r.pagingCount>1&&r.pagingCount!==r.controlNav.length)?r.update(c,d):o.controlNav.active()}},directionNav:{setup:function(){var c=b('<ul class="'+n+'direction-nav"><li><a class="'+n+'prev">'+k.prevText+'</a></li><li><a class="'+n+'next">'+k.nextText+"</a></li></ul>");if(r.controlsContainer){b(r.controlsContainer).append(c);r.directionNav=b("."+n+"direction-nav li a",r.controlsContainer)}else{r.append(c);r.directionNav=b("."+n+"direction-nav li a",r)}o.directionNav.update();r.directionNav.bind(q,function(e){e.preventDefault();var d=(b(this).hasClass(n+"next"))?r.getTarget("next"):r.getTarget("prev");r.flexAnimate(d,k.pauseOnAction)});if(l){r.directionNav.bind("click touchstart",function(d){d.preventDefault()})}},update:function(){var c=n+"disabled";if(!k.animationLoop){if(r.pagingCount===1){r.directionNav.addClass(c)}else{if(r.animatingTo===0){r.directionNav.removeClass(c).filter("."+n+"prev").addClass(c)}else{if(r.animatingTo===r.last){r.directionNav.removeClass(c).filter("."+n+"next").addClass(c)}else{r.directionNav.removeClass(c)}}}}}},touch:function(){var c,e,g,z,w,i,y,h,d=false;p.addEventListener("touchstart",f,false);function f(s){if(r.animating){s.preventDefault()}else{if(s.touches.length===1){r.pause();z=(m)?r.h:r.computedW;i=0;g=(r.currentSlide+r.cloneOffset)*z-r.padding;c=(m)?s.touches[0].pageY:s.touches[0].pageX;e=(m)?s.touches[0].pageX:s.touches[0].pageY;p.addEventListener("touchmove",j,false);p.addEventListener("touchend",x,false)}}}function j(s){w=(m)?c-s.touches[0].pageY:c-s.touches[0].pageX;d=(m)?(Math.abs(w)<Math.abs(s.touches[0].pageX-e)):(Math.abs(w)<Math.abs(s.touches[0].pageY-e));if(!d){s.preventDefault();if(Math.abs(w-i)>3){i=w;if(r.transitions){if(!k.animationLoop){w=w/((r.currentSlide===0&&w<0||r.currentSlide===r.last&&w>0)?(Math.abs(w)/z+2):1)}r.setProps(g+w,"setTouch")}}}}function x(u){if(r.animatingTo===r.currentSlide&&!d&&!(w===null)){var s=w,t=(s>0)?r.getTarget("next"):r.getTarget("prev");if(r.canAdvance(t)){r.flexAnimate(t,k.pauseOnAction)}else{r.flexAnimate(r.currentSlide,k.pauseOnAction,true)}}u.preventDefault();p.removeEventListener("touchmove",j,false);p.removeEventListener("touchend",x,false);c=null;e=null;w=null;g=null;if(k.slideshow&&!r.playing){r.play()}}},resize:function(){if(!r.animating&&r.is(":visible")){r.doMath();if(m){r.viewport.height(r.h);r.setProps(r.h,"setTotal")}else{r.newSlides.width(r.computedW);r.setProps(r.computedW,"setTotal")}}}};r.flexAnimate=function(g,h,d){if(!r.animating&&(r.canAdvance(g)||d)&&r.is(":visible")){r.animating=true;r.animatingTo=g;if(k.controlNav){o.controlNav.active()}r.slides.removeClass(n+"active-slide").eq(g).addClass(n+"active-slide");r.atEnd=g===0||g===r.last;if(k.directionNav){o.directionNav.update()}if(g===r.last){if(!k.animationLoop){r.pause()}}var i=(m)?r.slides.filter(":first").height():r.computedW,c,f,e;if(r.currentSlide===0&&g===r.count-1&&k.animationLoop&&r.direction!=="next"){f=0}else{if(r.currentSlide===r.last&&g===0&&k.animationLoop&&r.direction!=="prev"){f=(r.count+1)*i}else{f=(g+r.cloneOffset)*i}}r.setProps(f,"",k.animationSpeed);if(r.transitions){if(!k.animationLoop||!r.atEnd){r.animating=false;r.currentSlide=r.animatingTo}r.container.unbind("webkitTransitionEnd transitionend");r.container.bind("webkitTransitionEnd transitionend",function(){r.wrapup(i)})}}};r.wrapup=function(c){if(r.currentSlide===0&&r.animatingTo===r.last&&k.animationLoop){r.setProps(c,"jumpEnd")}else{if(r.currentSlide===r.last&&r.animatingTo===0&&k.animationLoop){r.setProps(c,"jumpStart")}}r.animating=false;r.currentSlide=r.animatingTo};r.animateSlides=function(){if(!r.animating){r.flexAnimate(r.getTarget("next"))}};r.pause=function(){clearInterval(r.animatedSlidesTimer);r.playing=false};r.play=function(){r.animatedSlidesTimer=setInterval(r.animateSlides,k.slideshowSpeed);r.playing=true};r.canAdvance=function(c){return(c===r.currentSlide)?false:(k.animationLoop)?true:(r.atEnd&&r.currentSlide===0&&c===r.last&&r.direction!=="next")?false:(r.atEnd&&r.currentSlide===r.last&&c===0&&r.direction==="next")?false:true};r.getTarget=function(c){r.direction=c;if(c==="next"){return(r.currentSlide===r.last)?0:r.currentSlide+1}else{return(r.currentSlide===0)?r.last:r.currentSlide-1}};r.setProps=function(f,e,d){var c=(function(){var g=(function(){switch(e){case"setTotal":return(r.currentSlide+r.cloneOffset)*f-r.padding;case"setTouch":return f;case"jumpEnd":return r.count*f-r.padding;case"jumpStart":return f-r.padding;default:return f-r.padding}}());return(g*-1)+"px"}());if(r.transitions){c=(m)?"translate3d(0,"+c+",0)":"translate3d("+c+",0,0)";d=(d!==undefined)?(d/1000)+"s":"0s";r.container.css("-"+r.pfx+"-transition-duration",d)}r.args[r.prop]=c;if(r.transitions||d===undefined){r.container.css(r.args)}};r.setup=function(d){if(d==="init"){r.container.find("div.loading").remove();r.viewport=b('<div class="flex-viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(r).append(r.container);r.cloneCount=0;r.cloneOffset=0}if(k.animationLoop){r.cloneCount=2;r.cloneOffset=1;if(d!=="init"){r.container.find(".clone").remove()}r.container.append(r.slides.first().clone().addClass("clone")).prepend(r.slides.last().clone().addClass("clone"))}r.newSlides=b(k.selector,r);var c=r.currentSlide+r.cloneOffset;if(m){r.container.height((r.count+r.cloneCount)*100+"%").css("position","absolute").width("100%");setTimeout(function(){r.newSlides.css({display:"block"});r.doMath();r.viewport.height(r.h);r.setProps(c*r.h,"init")},(d==="init")?100:0)}else{r.container.width((r.count+r.cloneCount)*100+"%");r.setProps(c*r.computedW,"init");setTimeout(function(){r.doMath();r.newSlides.css({width:r.computedW,"float":"left",display:"block"})},(d==="init")?100:0)}r.slides.removeClass(n+"active-slide").eq(r.currentSlide).addClass(n+"active-slide")};r.doMath=function(){var c=r.slides.first();r.w=r.width();r.h=c.height();r.boxPadding=r.padding*2;r.itemW=r.w;r.pagingCount=r.count;r.last=r.count-1;r.computedW=r.itemW-r.boxPadding};r.update=function(c,d){r.doMath();if(c<r.currentSlide){r.currentSlide+=1}else{if(c<=r.currentSlide&&c!==0){r.currentSlide-=1}}r.animatingTo=r.currentSlide;if(k.controlNav){if((d==="add")||r.pagingCount>r.controlNav.length){o.controlNav.update("add")}else{if((d==="remove")||r.pagingCount<r.controlNav.length){o.controlNav.update("remove",r.last)}}}if(k.directionNav){o.directionNav.update()}};o.init()};b.flexslider.defaults={namespace:"flex-",selector:".slides > li",direction:"horizontal",animationLoop:true,startAt:0,slideshow:true,slideshowSpeed:5000,animationSpeed:400,initDelay:0,randomize:false,pauseOnAction:true,touch:true,controlNav:true,directionNav:false,prevText:"",nextText:"",controlType:0,controlPos:0,paddingWidth:0,controlsContainer:"",};b.fn.flexslider=function(a){a=a||{};return this.each(function(){var e=b(this);if(a.selector===undefined){a.selector=".slides > li"}var f=e.find(a.selector);if(f.length===0){return}else{if(f.length===1){f.fadeIn(400)}else{if(e.data("flexslider")===undefined){new b.flexslider(this,a)}}}})}})(jQuery);
