login={loginload:function(){function c(g){var f=/^1\d{10}$/;if(!f.exec(g)){return false}else{return true}}function e(f){var g=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(g.test(f)){return true}return false}function a(g){var f=/^[^ \f\n\r\t\v]{6,16}$/;if(!f.exec(g)){return false}return true}function d(f,g){document.cookie=f+"="+escape(g)+";id=1ypg;path=/;domain="+$domain}function b(){$("#btnSubmitLogin").remove();$("#loginSubmitStatus").show()}$(function(){var q=$("#username");var l=$("#pwd");var h=$("#name_ts");var p=$("#pwd_ts");var s=null;var k=null;var g=1;var f=1;var n=function(u,t){u.attr("class","ts_wrong").html(t)};q.focus(function(){$(this).attr("class","text_name_focus")}).blur(function(){$(this).attr("class","text_name");if(g==0){h.attr("class","ts").html("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7/\u90ae\u7bb1")}});l.focus(function(){$(this).attr("class","text_password_focus")}).blur(function(){$(this).attr("class","text_password");if(f==0){p.attr("class","ts").html("\u8bf7\u586b\u5199\u957f\u5ea6\u4e3a6-16\u957f\u5ea6\u7684\u5b57\u7b26\u5bc6\u7801")}});var m=function(){s=q.val();k=l.val();if(s==""||(!c(s)&&!e(s))){g=0;q.focus();n(h,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7/\u90ae\u7bb1");return false}if(k==""){f=0;l.focus();n(p,"\u8bf7\u8f93\u5165\u767b\u5f55\u5bc6\u7801");return false}else{if(!a(k)){f=0;l.focus();n(p,"\u767b\u5f55\u5bc6\u7801\u4e3a6-16\u957f\u5ea6\u7684\u5b57\u7b26");return false}}g=1;f=1;return true};var o="";var j=$("#forward").val();var r=function(){if(!isLoaded){return}if(m()){if(o!=s){$.ajax({url:"/login/login.html",type:"post",data:"userName="+s+"&pwd="+k,beforeSend:b,success:function(t){if(t=="userError"){g=0;q.focus();n(h,"\u767B\u5F55\u5E10\u53F7\u4E0D\u5B58\u5728\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\uFF01");$("#loginText").prepend('<input id="btnSubmitLogin" type="button" value="\u767b\u5f55" class="login_init" tabindex="3" />');$("#loginSubmitStatus").hide();o=s}else{if(t=="pwdError"){f=0;l.focus();n(p,"\u767B\u5F55\u5BC6\u7801\u9519\u8BEF\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\uFF01");$("#loginText").prepend('<input id="btnSubmitLogin" type="button" value="\u767b\u5f55" class="login_init" tabindex="3" />');$("#loginSubmitStatus").hide()}else{if(t=="check"){g=0;q.focus();n(h,"\u6ce8\u518c\u7528\u6237\u6ca1\u6709\u9a8c\u8bc1\uff0c\u8bf7\u767b\u5f55\u90ae\u7bb1\u8fdb\u884c\u9a8c\u8bc1\uff01");$("#loginText").prepend('<input id="btnSubmitLogin" type="button" value="\u767b\u5f55" class="login_init" tabindex="3" />');$("#loginSubmitStatus").hide()}else{if(t.userId){d("userId",t.userId);d("face",t.faceImg)}if(t.userName){d("userName",t.userName)}else{if(t.mail){d("userName",t.mail)}else{if(t.phone){d("userName",t.phone)}}}d("loginType",0);if(j=="rego"){window.location.href=$www}else{if(j=="mycart"){window.location.href=$www+"/mycart/index.html"}else{if(j=="myUser"){window.location.href=$www+"/user/index.html"}else{if(j=="PostSingleList"){window.location.href=$www+"/user/PostSingleList.html"}else{if(j=="auth"){window.location.href=$www+"/referAuth.html"}else{if(j=="cartPay"){window.location.href=$www+"/cartPay/index.html"}else{if(j=="userRecharge"){window.location.href=$www+"/user/UserRecharge.html"}else{window.location.href=$www}}}}}}}}}}},error:function(){alert("\u8FDE\u63A5\u670D\u52A1\u5668\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5\uFF01");window.location.href=$www}})}else{n(h,"\u767B\u5F55\u5E10\u53F7\u4E0D\u5B58\u5728\uFF0C\u8BF7\u91CD\u65B0\u8F93\u5165\uFF01");g=0;q.focus()}}};$("#LoginForm").keydown(function(t){var u=(window.event)?event.keyCode:t.keyCode;if(u==32){return false}else{if(u==13){r()}}return true});$("#btnSubmitLogin").live("click",function(){r()});var i=function(){GetLogoInfo(9,"getbysortid",false,function(t){$("#loadingPicBlock").html(t)})};isLoaded=true;q.focus()});QC.Login({btnId:"qqLoginBtn",scope:"get_user_info,add_share",size:"B_M"},function(f,g){if(QC.Login.check()){QC.Login.getMe(function(i,h){$.ajax({url:"/register/authorizeIsExists.action",type:"POST",data:"openId="+encodeURIComponent(i.replace(/(\/)/g,"")),success:function(j){if(j=="true"){$.ajax({type:"POST",url:"/register/authorizeRegsiter.action",data:"userName="+encodeURIComponent(f.nickname.replace(/(\/)/g,""))+"&openId="+i+"&userFace="+f.figureurl_2,success:function(k){d("userId",k.userId);d("userName",k.userName);d("face",k.faceImg);d("loginType",2);window.location.href="/register/qqUserInfoAuth.html"}})}else{d("userId",j.userId);d("userName",j.userName);d("face",j.faceImg);d("loginType",2);window.location.href="/register/qqUserInfoAuth.html"}}})})}})}};jQuery(function(a){login.loginload()});
