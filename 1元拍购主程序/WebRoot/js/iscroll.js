(function(){var b=function(e,a){var f=this;if(typeof e=="string"){this.id=document.getElementById(e)}else{if(typeof e=="object"){this.id=document.getElementById(e)}else{this.id=e}}this.Child=this.id.children[0];if(!this.Child){return}a=a||{};for(i in a){this.setting[i]=a[i]}this.setting={speed:20,scrollY:true,margin:0,drap:false};this.setDrap();this.Child.style.position="relative";this.domHeight=this.returnHeightWidth(this.id);this.domConHeight=this.returnHeightWidth(this.Child);if(this.domHeight>=this.domConHeight){return}this.TopLeft=this.setting.scrollY?"top":"left";this.WidthHeight=this.setting.scrollY?"height":"width";this.Drag.style[this.TopLeft]="0px";this.Child.style[this.TopLeft]="0px";this.DrapHeight=this.domHeight/this.domConHeight*this.domHeight;this.Drag.style[this.WidthHeight]=this.DrapHeight+"px";this.Poor=this.returnHeightWidth(this.DragParent)-this.DrapHeight;this.Drag.onmousedown=function(c){f._Down(f,c)};this.DragParent.onclick=function(c){f.DragMM(f,c,true)};this.addEvent(this.id,"mousewheel",this.wheel,this);this.addEvent(this.id,"DOMMouseScroll",this.wheel,this)};b.prototype={setDrap:function(){this.id.style.position="relative";if(!this.setting.drap){var a=document.createElement("div"),d=document.createElement("a");a.className="iscroll-drap-parent";a.style.height=(parseInt(document.getElementById("cart_box").style.height)-4)+"px";a.appendChild(d);this.id.appendChild(a)}this.DragParent=this.id.children[1];this.Drag=this.DragParent.children[0]},wheel:function(e){e=e||window.event;var f=false;f=e.wheelDelta?e.wheelDelta<0:e.detail>0;var a=f?this.returnTopLeft(this.Drag)+this.setting.speed:this.returnTopLeft(this.Drag)-this.setting.speed;this.DragSet(a);if(e&&e.preventDefault){e.preventDefault()}else{window.event.returnValue=false}return false},_Down:function(e,f){f=f||window.event;var a=e.setting.scrollY?f.clientY:f.clientX;e.dx=a-e.returnTopLeft(e.Drag);document.onmousemove=function(c){e.DragMM(e,c)};document.onmouseup=function(){e.DragUP(e)};if(f&&f.preventDefault){f.preventDefault()}else{window.event.returnValue=false}return false},DragMM:function(e,k,l){k=k||window.event;var o=e.setting.scrollY?k.clientY:k.clientX,n=e.dx||0;if(l){var m=e.returnTopLeft(e.Drag);if(m<o){o=o-e.returnHeightWidth(e.Drag)}}var a=o-n;e.DragSet(a)},DragUP:function(){document.onmousemove=function(){};document.onmouseup=function(){}},DragSet:function(a){if(a<0){a=0}if(a>this.Poor){a=this.Poor}this.Drag.style[this.TopLeft]=a+"px";this.BoxSet()},BoxSet:function(){var a=this.returnTopLeft(this.Drag)/this.Poor;this.Child.style[this.TopLeft]=-a*(this.domConHeight-this.domHeight)+"px"},addEvent:function(j,a,k,g){var h=function(){k.apply(g,arguments)};window.addEventListener?j.addEventListener(a,h,false):j.attachEvent("on"+a,h)},removeEvent:function(e,a,f){window.removeEventListener?e.removeEventListener(a,f,false):e.attachEvent("on"+a,f)},returnTopLeft:function(a){return this.setting.scrollY?a.offsetTop:a.offsetLeft},returnHeightWidth:function(a){return this.setting.scrollY?a.offsetHeight:a.offsetWidth}};if(typeof define=="function"){define(function(f,a,e){e.exports=b})}else{window.iScroll=b}})();
